

# Project Architecture - InstallerApp

## Overview

InstallerApp is a Java application designed to facilitate installation, automatic updates, and version management for a desktop application. It integrates Windows automation scripts and an update system connected to GitHub Releases.

---

## Folder Structure

```
installer_pull_updates/
├── pom.xml
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── org/example/
│   │   │       ├── Main.java
│   │   │       └── updater/UpdateChecker.java
│   │   └── resources/
│   └── test/
│       └── java/
├── target/
│   ├── InstallerApp-<version>.jar
│   ├── InstallerApp-<version>-Windows-Installer-TGCS.zip
│   └── installer_flat/
└── docs/
    └── arquitectura.md
```

---

## Main Components

### 1. Application Logic (Java)
- **`Main.java`**: Application entry point.
- **`updater/UpdateChecker.java`**: Module responsible for checking, downloading, and applying automatic updates from GitHub Releases. Features:
  - Periodic version checks.
  - Artifact download and validation.
  - Generation and execution of update scripts.
  - Integration with the graphical interface (Swing) for notifications and dialogs.

### 2. Automation Scripts (Windows)
- **`install.bat`**: Robust installer that copies necessary files to `C:\Program Files\InstallerApp\TGCS` and checks for administrator privileges.
- **`uninstall.bat`**: Uninstaller that removes application files and directories.
- **`run-app.bat`**: Script to launch the Java application, verifying Java is installed.
- **`update.bat`**: Script dynamically generated by the updater to safely apply new versions with elevated privileges.

### 3. Update System
- **GitHub Releases Integration**: The updater queries the GitHub API to detect new versions and download published artifacts (JAR and ZIP) from releases.
- **Validation and Backup**: Before installing a new version, the current JAR is backed up and the downloaded file is validated.
- **Elevated Execution**: Update scripts request administrator privileges via PowerShell to ensure write access to protected directories.

### 4. Packaging and Distribution
- **Maven**: Used to compile, test, and package the application.
- **Artifacts**: The build process generates an executable JAR and an installer ZIP, both ready to be published on GitHub Releases.

---

## Update Flow

1. **Application start**: `UpdateChecker` is initialized.
2. **Update check**: GitHub Releases API is queried.
3. **User notification**: If a new version is available, a dialog with options is shown.
4. **Download and validation**: The artifact is downloaded and validated.
5. **`update.bat` generation**: A script is created to automate the update.
6. **Script execution**: The user accepts, and the script replaces the JAR, updates scripts, and restarts the application.

---

## Security Considerations
- All critical scripts request administrator privileges before modifying files in `C:\Program Files`.
- Automatic backup is performed before overwriting the main executable.
- The update system cleans up temporary files after installation.

---

## Extensibility
- The system is ready to add new Java modules and additional scripts.
- The update logic can be adapted for other operating systems or release sources.

---

## Simplified Diagram

```
[GitHub Releases] ←→ [UpdateChecker.java] ←→ [update.bat / install.bat / run-app.bat]
         ↑
         │
     [User]
```

---

**Author:** InstallerApp Team

**Date:** August 2025
